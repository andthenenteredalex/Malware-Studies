#!/bin/bash

# creating code to determine what subnet it iscurrently running in and tp ping the entire subnet once it determines it.
# will add an arp command and search.

DETERMINE_INTERFACES=`ifconfig | grep Link | awk -F" " '{ print $1" "$10 }'`

for i in "${DETERMINE_INTERFACES[@]}"
do
    SLASH=`ip route show | awk '/'"$INTERFACE_NAMES"'.*scope/ {print $1}' | grep -v '169.254.0.0/16'`
done


SUBNET_END=${SLASH:(-2)} # sample output = /28
NETWORK_PREFIX=${SLASH::-5} # sample output
if [ $SUBNET_END -eq '28' ] # /28 is hardcoded in. Two ways to fix this: 
	# by creating some sort of intelligence, or using logic, such as arrays or
	# if statements that include all ranges.
then
    echo 'subnet is a /28'
else
    echo 'not a /28'
fi

# this line relies on hardcoded sequence. Two locations for variables: (seq 49 62) and 192.168.5.$ip 
#
# determines all alive hosts on a subnet

DETERMINE_LIVE_HOSTS=`for ip in $(seq 49 62); do ping -c 1 $NETWORK_PREFIX$ip; done | grep "64 bytes"`

echo These hosts are alive: $DETERMINE_LIVE_HOSTS
