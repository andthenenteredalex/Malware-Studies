#!/bin/bash

# for linux operating systems (written for Ubuntu)
# hand crafted by Alex Clark 3-10-2019
#
# see README.md for info on this project
#
#                 the specimen3 prompt:
#
#                 create a script that:
#
#               - current outbound connections -> need to add this#               
#               - checks to see if google is live (NOTICE: I use only ping, and I send only 1 packet. do nothing invasive to any site)
#               - if it is, it checks to see if the subnet gateway is live (I manually added my gateway IP. specimen2 will determine the gateway on its own)
#               - if it is, it performs a port scan on the router and a ping sweep (NOTICE: I did not perform a port scan on google.com)
#               - NOTICE: I perform the port scan ONLY ON MY GATEWAY that I own on my internal network. Alex Clark is not responsible for any unethical behavior of any other individual.

CHECK_CONNECTIVITY=google.com
CHECK_C2=192.168.5.49 # my gateway <- added manually

CHECK_HOST=$( ping -c 1 $CHECK_CONNECTIVITY | grep icmp* | wc -l )
CHECK_C2_HOST=$( ping -c 1 $CHECK_C2 | grep icmp* | wc -l )

if [ $CHECK_HOST -eq 0 ]
then
    echo "Host is not Alive! Try again later.."
else
    if [ $CHECK_C2_HOST -eq 0 ]
    then 
        echo "$CHECK_C2 host is not alive. try again later.."
    else
        echo "both $CHECK_CONNECTIVITY and $CHECK_C2 hosts are Alive!"
    fi
fi

SCAN=`nmap $CHECK_C2` # as currently coded, requires nmap be installed. can use telnet?
echo $SCAN 
