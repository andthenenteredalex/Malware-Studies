#!/bin/bash

# for linux operating systems (written for Ubuntu)
# before running: create passwords.txt file, make up a few bogus usernames and passwords, place file in any directory
# hand crafted by Alex Clark 2-23-2019
#
# see README.md for info on this project
#
#                 the specimen1 prompt:
#
#                 create a script that:
#
#               - determines what directory it is in
#               - determines who the current user is 
#               - determines when the user logged in
#               - determines what the current date and time is 
#               - determines the hostname of the machine it is running on 
#               - determines the number of running processes
#               - searches for a password in any directory which includes 'passwords' in its name
#               - searches for any items with .iso filetype
#               - creates an output file that includes the current date and writes it to the current directory 
#               - writes all the information to the output file


WHEREAMI=`pwd`
USER=`whoami`
USER_LOG_IN_TIME=`last $USER`
NOW=$(date +"%m_%d_%y")
HOSTNAME=`hostname`
NUM_PROCS=$(ps -e | sed 1d | wc -l)
SEARCH_FOR_PASSWORDS=$(find . -print | grep -i "passwords")
# add if statment for if reading the passwords file if it it exists (we know it does, I just created it )
FIND_ISO_FILE_TYPES=$(find . -type f -name "*.iso")
OUTPUT_FILE_NAME="specimen1_output_$NOW.txt"

echo >> $OUTPUT_FILE_NAME
echo The current date is $NOW  >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo The current directory is $WHEREAMI >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo You are logged in as user $USER >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo This device is $HOSTNAME >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo $USER\'s log on history: $USER_LOG_IN_TIME >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo There are currently $NUM_PROCS running processes on this machine >> $OUTPUT_FILE_NAME 
echo >> $OUTPUT_FILE_NAME
echo $SEARCH_FOR_PASSWORDS >> $OUTPUT_FILE_NAME
echo >> $OUTPUT_FILE_NAME
echo $FIND_ISO_FILE_TYPES >> $OUTPUT_FILE_NAME
echo The file $SEARCH_FOR_PASSWORDS is located here : $LOCATION_OF_PASSWORDS >> $OUTPUT_FILE_NAME
cat $OUTPUT_FILE_NAME
